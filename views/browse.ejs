<!DOCTYPE html>
<html>
<head>
  <link rel="stylesheet" href="/styles.css">
  <title><%= title %></title>
</head>
<body>
  <%- include('./partials/navbar') %>
  <form class="browse-options" action="/stock" method="GET">
      <label class="option-header" for='name'>Name</label>
      <input class="search" type='text' name='name' id='name' value=<%= filters.name ? filters.name : "" %>>
      <div class="category-options">
          <p class="option-header">Category</p>
          <% categories.forEach((category, index) => { %>
              <div class="option-entry">
                  <input
                      type='checkbox'
                      name='category'
                      id='<%= category.category %>'
                      value='<%= category.id %>'
                      <%= (category.id === filters.category ||(Array.isArray(filters.category) && filters.category.includes(`${category.id}`)) ? "checked" : "") %>
                  >
                  <label for='<%= category.category %>'>
                      <%= category.category %>
                  </label>
              </div>
          <% }); %>
      </div>
      <button class="filter submit" type="submit">Filter</button>
  </form>
  <div class="body browse">
      <div class='results-area'>
        <% if (results.length <= 0) { %>
            <div class="empty-result">
                <p>No Matching Results</p>
            </div>
        <% } else { %>
            <table class="results no-select">
                <tr>
                    <th class="action-col"></th>
                    <th class="name">Furniture</th>
                    <th>Category</th>
                    <th>Quantity</th>
                </tr>
                <% results.forEach((result, index) => { %>
                    <tr class="result-entry <%= index === 0 ? 'first' : '' %> <%= index + 1 === results.length ? 'last' : '' %>  <%= index % 2 === 0 ? 'odd' : 'even' %>">
                        <td class="action-col"><a class="action" href="/stock/edit/<%= result.id %>"></button></td>
                        <div>
                            <td class="result-info name"><%= result.name %></th>
                            <td class="result-info category center"><%= result.category %></th>
                            <td class="result-info quantity center"><%= result.quantity %></th>
                        </div>
                    </tr>
                <% }); %>
            </table>
        <% } %>
      </div>
  </div>
</body>
</html>
